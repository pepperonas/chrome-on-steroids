<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ApplyAI - Einstellungen</title>
  <link rel="stylesheet" href="popup.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="popup-container">
    <header class="popup-header">
      <div class="header-content">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
          <path d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" stroke="#4A90E2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div>
          <h1>ApplyAI</h1>
          <p class="subtitle">AI Bewerbungsassistent</p>
        </div>
      </div>
    </header>
    
    <div class="popup-body">
      <!-- AI Provider Auswahl -->
      <section class="settings-section">
        <div class="section-header">
          <h2>KI-Provider</h2>
          <span class="active-provider-badge" id="active-provider-badge">Aktiv: ChatGPT</span>
        </div>
        <div class="provider-tabs">
          <button class="tab-btn active" data-provider="chatgpt">
            ChatGPT
          </button>
          <button class="tab-btn" data-provider="claude">
            Claude
          </button>
        </div>
        
        <div class="form-group">
          <label for="api-key">API Key</label>
          <div class="input-with-button">
            <input type="password" id="api-key" placeholder="sk-...">
            <div class="validate-container">
              <button class="validate-btn" id="validate-key">
                Validieren
              </button>
              <span class="validate-status hidden" id="validate-status"></span>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="model-select">Modell</label>
          <select id="model-select">
            <!-- Wird dynamisch gefüllt -->
          </select>
        </div>
      </section>
      
      <!-- Benutzerprofil -->
      <section class="settings-section">
        <h2>Ihr Profil</h2>
        
        <div class="form-group">
          <label for="user-name">Name *</label>
          <input type="text" id="user-name" required placeholder="Max Mustermann">
        </div>
        
        <div class="form-group">
          <label for="user-email">E-Mail *</label>
          <input type="email" id="user-email" required placeholder="max@example.com">
        </div>
        
        <div class="form-group">
          <label for="user-phone">Telefon</label>
          <input type="tel" id="user-phone" placeholder="+49 123 456789">
        </div>
        
        <div class="form-group">
          <label for="user-skills">Skills (kommagetrennt) *</label>
          <textarea id="user-skills" rows="3" placeholder="Java, Spring Boot, React, TypeScript"></textarea>
        </div>
        
        <div class="form-group">
          <label for="user-experience">Erfahrung *</label>
          <textarea id="user-experience" rows="4" placeholder="10+ Jahre Erfahrung in Full-Stack Entwicklung mit Fokus auf..."></textarea>
        </div>
        
        <div class="form-group">
          <label for="user-intro">Persönliche Intro (optional)</label>
          <textarea id="user-intro" rows="3" placeholder="Individueller Einleitungstext für Bewerbungen"></textarea>
        </div>
        
        <div class="form-group">
          <label for="user-portfolio">Portfolio-Projekte (optional)</label>
          <textarea id="user-portfolio" rows="4" placeholder="Relevante Projekte mit Links, z.B.:&#10;- mxster.de - Music Quiz App (React, TypeScript)&#10;- berlinometer.de - Berlin Events Platform&#10;- github.com/username/project - Beschreibung"></textarea>
          <small class="form-hint">Diese Projekte werden am Ende des Anschreibens (vor der Verabschiedung) erwähnt.</small>
        </div>
      </section>
      
      <!-- Kleinanzeigen Einstellungen -->
      <section class="settings-section">
        <h2>Kleinanzeigen Einstellungen</h2>
        <p class="section-description">
          Konfiguriere automatische Kaufanfragen mit Preisvorschlag für kleinanzeigen.de
        </p>
        
        <div class="form-group">
          <label for="discount-type">Rabatt-Typ</label>
          <select id="discount-type">
            <option value="percentage">Prozent (%)</option>
            <option value="fixed">Festbetrag (€)</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="discount-value">Rabatt-Wert</label>
          <input type="number" id="discount-value" placeholder="15" min="0" value="15">
          <small class="form-hint" id="discount-hint">Gib 15 ein für 15% Rabatt (Standard)</small>
        </div>
        
        <div class="form-group">
          <label for="message-template">Nachrichtenvorlage (optional)</label>
          <textarea id="message-template" rows="5" placeholder="Hallo,&#10;&#10;ich interessiere mich für &quot;{title}&quot;.&#10;&#10;Würden Sie {discounted_price}€ akzeptieren?&#10;&#10;Viele Grüße"></textarea>
          <small class="form-hint">Verfügbare Platzhalter: {title}, {price}, {discounted_price}, {seller}, {location}</small>
        </div>
      </section>
      
      <!-- Generierungs-Logs -->
      <section class="settings-section">
        <h2>Generierungs-Logs</h2>
        <p class="section-description">
          Alle Parameter jeder Anschreiben-Generierung werden automatisch gespeichert.
        </p>
        
        <div class="log-stats" id="log-stats">
          <div class="stat-item">
            <span class="stat-label">Gesamt:</span>
            <span class="stat-value" id="stat-total">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Erfolgreich:</span>
            <span class="stat-value success" id="stat-success">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Fehler:</span>
            <span class="stat-value error" id="stat-failed">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Ø Zeit:</span>
            <span class="stat-value" id="stat-avg-time">0ms</span>
          </div>
        </div>
        
        <div class="log-actions">
          <button class="btn btn-icon" id="export-logs-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
            </svg>
            Logs exportieren
          </button>
          <button class="btn btn-icon btn-danger" id="clear-logs-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
            </svg>
            Logs löschen
          </button>
        </div>
      </section>
      
      <!-- Status Anzeige -->
      <div class="status-message hidden" id="status-message"></div>
    </div>
    
    <footer class="popup-footer">
      <div class="footer-left">
        <button class="btn btn-icon" id="export-btn" title="Einstellungen exportieren">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
          </svg>
          Export
        </button>
        <button class="btn btn-icon" id="import-btn" title="Einstellungen importieren">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
          </svg>
          Import
        </button>
        <input type="file" id="import-file-input" accept=".json" style="display: none;">
      </div>
      <div class="footer-right">
        <button class="btn btn-secondary" id="reset-btn">
          Zurücksetzen
        </button>
        <button class="btn btn-primary" id="save-btn">
          Speichern
        </button>
      </div>
    </footer>
  </div>
  
  <script src="popup.js"></script>
</body>
</html>

